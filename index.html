<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Sherry,undefined"><meta name="copyright" content="Sherry"><title> | Sherry's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  localSearch: undefined
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Sherry</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">27</span></a></div></div></div><nav class="no-bg" id="nav" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Sherry's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="site-info"><div id="site-title">Sherry's Blog</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item"><a class="article-title" href="/2018/08/16/Django 使用celery的一些总结/">Django 使用celery的一些总结</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-16</time><div class="content"><p><a href="http://python.jobbole.com/81953/" target="_blank" rel="noopener">http://python.jobbole.com/81953/</a></p>
<p>工作中主要用Celery 来分发任务. 用redis来传消息.</p>
<p>以发送邮件的任务为例:</p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/04/16/Python的上下文管理器/">No title</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-16</time><div class="content"><hr>
<p>title: Python的上下文管理器<br>date: 2016-04-13 19:45:14<br>tags:<br>—　</p>
<p>…</p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/04/16/Pythonic写法总结/">No title</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-16</time><div class="content"><hr>
<p>title: Pythonic 写法总结<br>date: 2018-04-15 19:45:14<br>tags:<br>—　</p>
<p>Python 这门语言的, 入门容易, 精通难, 难在语法糖吧. Python有很多trick, 可以让代码更优雅,高效,高质量.<br>　　2016年6~8月我周末都是在听一些公开课,在cs212上学了一些更Pythonic的写法:</p>
<h2 id="找出一个列表中元素出现次数最多的元素"><a href="#找出一个列表中元素出现次数最多的元素" class="headerlink" title="找出一个列表中元素出现次数最多的元素:"></a>找出一个列表中元素出现次数最多的元素:</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 统计a中每个元素出现的次数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;i:a.count(i)  <span class="keyword">for</span> i <span class="keyword">in</span> set(a) &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment"># 返回value 最大值的key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>max(b, key=b.get)</span><br></pre></td></tr></table></figure>
<h3 id="关于-Super"><a href="#关于-Super" class="headerlink" title="关于 Super"></a>关于 Super</h3><p>1,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.__init__()是为了继承父类的init.</span><br><span class="line"><span class="number">2.</span> 如果在子类中需要重新定义self.XXX  , 则 super 需要放在最上面</span><br><span class="line">Ps : Python deepcopy 很浪费资源的 </span><br><span class="line"><span class="comment">##  用字典映射</span></span><br><span class="line"> ```Python</span><br><span class="line">remap = &#123;</span><br><span class="line">    ord(<span class="string">'\n'</span>):<span class="string">''</span>,</span><br><span class="line">    ord(<span class="string">'\t'</span>):<span class="string">' '</span></span><br><span class="line">&#125;</span><br><span class="line">line = line.translate(remap)</span><br><span class="line"></span><br><span class="line">actions = &#123;</span><br><span class="line">        <span class="number">2</span>: print_help,</span><br><span class="line">        <span class="number">3</span>: save_help,</span><br><span class="line">&#125;</span><br><span class="line">action = actions.get(argc, usage)</span><br><span class="line">action()</span><br><span class="line"><span class="comment"># 用字典映射不同的方法</span></span><br></pre></td></tr></table></figure>
<p>#常见的Python写法: </p>
<p>###生成器(gernerator), yield, .next()<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x104feab40</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> g:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> n</span><br></pre></td></tr></table></figure></p>
<h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器:"></a>迭代器:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="string">'ABC'</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> ch</span><br><span class="line">...</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br></pre></td></tr></table></figure>
<h3 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式:"></a>列表生成式:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line">[<span class="number">4</span>, <span class="number">16</span>, <span class="number">36</span>, <span class="number">64</span>, <span class="number">100</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'XYZ'</span>]</span><br><span class="line">[<span class="string">'AX'</span>, <span class="string">'AY'</span>, <span class="string">'AZ'</span>, <span class="string">'BX'</span>, <span class="string">'BY'</span>, <span class="string">'BZ'</span>, <span class="string">'CX'</span>, <span class="string">'CY'</span>, <span class="string">'CZ'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="map-reduce-Filter"><a href="#map-reduce-Filter" class="headerlink" title="map / reduce / Filter:"></a>map / reduce / Filter:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;map(函数, 可迭代的对象)</span><br><span class="line">&gt;&gt;&gt;reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line">filter(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>])</span><br><span class="line"><span class="comment"># 结果: [1, 5, 9, 15]</span></span><br></pre></td></tr></table></figure>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>###　一些魔法方法</p>
<h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><h3 id="利用collections-deque-保留有限的历史纪录"><a href="#利用collections-deque-保留有限的历史纪录" class="headerlink" title="利用collections.deque 保留有限的历史纪录:"></a>利用collections.deque 保留有限的历史纪录:</h3><p>使用 deque(maxlen=N) 构造函数会新建一个固定大小的队列。当新的元素加入并 且这个队列已满的时候，最老的元素会自动被移除掉。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>q = deque(maxlen=<span class="number">3</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q</span><br><span class="line">deque([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], maxlen=<span class="number">3</span>) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q</span><br><span class="line">deque([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], maxlen=<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q</span><br><span class="line">deque([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], maxlen=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 在队列两端插入或删除元素时间复杂度都是 O(1) ，而在列表的开头插入或删除元 素的时间复杂度为 O(N)</span></span><br></pre></td></tr></table></figure>
<h3 id="如何在循环中获取下标"><a href="#如何在循环中获取下标" class="headerlink" title="如何在循环中获取下标:"></a>如何在循环中获取下标:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> idx, val <span class="keyword">in</span> enumerate(ints):</span><br><span class="line">    <span class="keyword">print</span> idx, val</span><br><span class="line"><span class="comment"># 使用enumerate</span></span><br></pre></td></tr></table></figure>
<h3 id="如何判断一个对象是否拥有某个属性"><a href="#如何判断一个对象是否拥有某个属性" class="headerlink" title="如何判断一个对象是否拥有某个属性:"></a>如何判断一个对象是否拥有某个属性:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> hasattr(a, <span class="string">'property'</span>):</span><br><span class="line">    a.property</span><br></pre></td></tr></table></figure>
<h3 id="staticmethod和-classmethod的区别"><a href="#staticmethod和-classmethod的区别" class="headerlink" title="@staticmethod和@classmethod的区别"></a>@staticmethod和@classmethod的区别</h3><h3 id="is是身份测试，-是相等测试"><a href="#is是身份测试，-是相等测试" class="headerlink" title="is是身份测试，==是相等测试:"></a>is是身份测试，==是相等测试:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'pub'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">''</span>.join([<span class="string">'p'</span>, <span class="string">'u'</span>, <span class="string">'b'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h3 id="如何获取文件扩展名"><a href="#如何获取文件扩展名" class="headerlink" title="如何获取文件扩展名:"></a>如何获取文件扩展名:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fileName, fileExtension = os.path.splitext(<span class="string">'/path/to/somefile.ext'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fileName</span><br><span class="line"><span class="string">'/path/to/somefile'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fileExtension</span><br><span class="line"><span class="string">'.ext'</span></span><br></pre></td></tr></table></figure>
<h3 id="如何获取list中包含某个元素所在的下标"><a href="#如何获取list中包含某个元素所在的下标" class="headerlink" title="如何获取list中包含某个元素所在的下标:"></a>如何获取list中包含某个元素所在的下标:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">"foo"</span>,<span class="string">"bar"</span>,<span class="string">"baz"</span>].index(<span class="string">'bar'</span>)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="浅拷贝深拷贝"><a href="#浅拷贝深拷贝" class="headerlink" title="浅拷贝深拷贝"></a>浅拷贝深拷贝</h3><ul>
<li>对象的赋值是:获得了当前元素的地址元素以及子元素的地址</li>
<li>浅拷贝: 浅拷贝仅仅复制了容器中元素的地址</li>
<li>深拷贝，完全拷贝了一个副本，容器内部元素地址都不一样</li>
</ul>
<p>总结: 浅拷贝深拷贝的问题还是跟Python的引用机制有关, 说白了, append,pop这些操作, 不更换地址.<br>而对象有两种,“可更改”（mutable）与“不可更改”（immutable）对象。在python中，strings, tuples, 和numbers是不可更改的对象，而list,dict等则是可以修改的对象。<br>也就是说, 地址里的内存元素不可变, 只能另外申请一个内存.</p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/04/16/Python 部署、运维各种工具和库的总结/">No title</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-16</time><div class="content"><hr>
<p>title: Python 部署、运维各种工具和库的总结<br>date: 2016-04-16 19:45:14<br>tags:<br>—　</p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/04/16/Django 数据库事务/">Django 数据库事务</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-16</time><div class="content"></div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/04/16/hello-world/">Hello World</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-16</time><div class="content"><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2018/02/16/Python 的id, type, value/">Python 的id, type, value</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-16</time><div class="content"><p><a href="https://www.zhihu.com/question/33258845" target="_blank" rel="noopener">https://www.zhihu.com/question/33258845</a><br><a href="http://stackoverflow.com/questions/11476190/why-0-6-is-6-false" target="_blank" rel="noopener">http://stackoverflow.com/questions/11476190/why-0-6-is-6-false</a></p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2017/09/16/那些年, 社会教我做的人/">那些年, 社会教我做的人</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-09-16</time><div class="content"><ul>
<li>常常复盘</li>
<li>工作中能学到的东西是有限的, 要想办法利用自己的时间多学习</li>
<li>定位很重要</li>
<li>技术是为了解决问题(产生价值)而出现的,技术本身的信仰之争毫无意义</li>
<li>成人成事比技术难多了</li>
<li>不讨论认识的人</li>
</ul>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2017/04/16/Django LiveServerTestCase/">Django LiveServerTestCase</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-04-16</time><div class="content"><p>使用Django LiveServerTestCase 和 Selenium 搭建自动化测试的流程:</p>
<ul>
<li>新建虚拟机<br>我用的 vmware + ubuntu16.04 的系统</li>
</ul>
<ul>
<li><p>新建一个Django的项目</p>
</li>
<li><p>编写测试环境的脚本 (develop下)</p>
</li>
<li><p>windows主机测试环境的搭建 : selenium-server-standalone-3.3.1<br>(另外, Mac也要装)</p>
</li>
<li><p>测试的编写.(先在windows上跑通selenium,随便测试一个脚本, 参考官方文档给的demo. 然后在app的目录下编写测试, 比如我测试的是admin的登录,利用django给的demo, 自己做了一些修改. 改了host(换成windows的主机的host(cmd:ipconfig可以查到)))</p>
</li>
<li><p>在虚拟机跑通测试.<br>(利用桥接的方式连接主机, 先在windows上开启selenium-server, 在selenium-server-standalone-3.3.1文件所在的目录下shift右键打开命令行, 并跑以下命令:</p>
<figure class="highlight java"><figcaption><span>-Dwebdriver.chrome.driver</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(备注: 因为这里需要在虚拟机里面使用remote方式连接主机(Windows)进行测试, 所以需要使用:</span><br><span class="line">```-Dwebdriver.chrome.driver=<span class="string">"C:\Program Files (x86)\chromedriver\chromedriver.exe"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>来指定chrome的路径, 如果需要测试多个浏览器, 则需要指定多个浏览器的地址. 可以写一个.bat文件来执行这个脚本. )<br>(备注2: 一开始怎么都连不上windows的主机, 经过大佬指点, 在java命令里加参数(-D), 瞬间霍然开朗, 沉舟侧畔千帆过, 柳暗花明又一村.谢谢大佬^_^)</p>
<ul>
<li>测试<br>Django 1.11 使用<code>python manage.py test</code> 就可以自动测试所有的test. 包括之前官方给的demo以及…</li>
</ul>
<p>至此: 终于跑通了liveservertestcase… 遇到了很多坑, 非常感谢Google以及某位大佬的提供的技术支持…</p>
</div><hr></div><div class="recent-post-item"><a class="article-title" href="/2017/04/16/Flask 源码剖析/">Flask 源码剖析</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-04-16</time><div class="content"><p>以下是我研究的Flask源码的笔记:<br><a href="https://github.com/sherry255/flask_notes" target="_blank" rel="noopener">https://github.com/sherry255/flask_notes</a></p>
</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2018 By Sherry</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>